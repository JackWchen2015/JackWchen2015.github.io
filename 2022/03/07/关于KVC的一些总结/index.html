<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"github.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="article">
<meta property="og:title" content="关于KVC的一些总结">
<meta property="og:url" content="https://github.com/JackWchen2015/JackWchen2015.github.io.git/2022/03/07/%E5%85%B3%E4%BA%8EKVC%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%BB%E7%BB%93/index.html">
<meta property="og:site_name" content="学计算机的那个">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://github.com/2022/03/07/%E5%85%B3%E4%BA%8EKVC%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%BB%E7%BB%93/kvc.png">
<meta property="og:image" content="https://github.com/2022/03/07/%E5%85%B3%E4%BA%8EKVC%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%BB%E7%BB%93/collectionCal.png">
<meta property="article:published_time" content="2022-03-07T00:00:00.000Z">
<meta property="article:modified_time" content="2023-05-13T11:49:32.081Z">
<meta property="article:author" content="Jack Chen">
<meta property="article:tag" content="KVC">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/2022/03/07/%E5%85%B3%E4%BA%8EKVC%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%BB%E7%BB%93/kvc.png">

<link rel="canonical" href="https://github.com/JackWchen2015/JackWchen2015.github.io.git/2022/03/07/%E5%85%B3%E4%BA%8EKVC%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%BB%E7%BB%93/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>关于KVC的一些总结 | 学计算机的那个</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">学计算机的那个</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">不是我觉到、悟到，你给不了我，给了也拿不住;只有我觉到、悟到，才有可能做到，能做到的才是我的.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/JackWchen2015/JackWchen2015.github.io.git/2022/03/07/%E5%85%B3%E4%BA%8EKVC%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jack Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学计算机的那个">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          关于KVC的一些总结
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-03-07 08:00:00" itemprop="dateCreated datePublished" datetime="2022-03-07T08:00:00+08:00">2022-03-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-05-13 19:49:32" itemprop="dateModified" datetime="2023-05-13T19:49:32+08:00">2023-05-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/Runtime/" itemprop="url" rel="index"><span itemprop="name">Runtime</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <img src="/2022/03/07/%E5%85%B3%E4%BA%8EKVC%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%BB%E7%BB%93/kvc.png" class="&#x3D;">

<span id="more"></span>


<h2 id="KVC"><a href="#KVC" class="headerlink" title="KVC"></a>KVC</h2><p>KVC的全称是Key-Value Coding（键值编码），是由<code>NSKeyValueCoding</code>非正式协议启用的一种机制，对象采用这种机制来提供<code>对其属性的间接访问</code>，可以通过字符串来访问一个对象的成员变量或其关联的存取方法（<code>getter</code> or <code>setter</code>）</p>
<p>KVC还可以访问私有变量</p>
<p>KVC是许多其他 Cocoa 技术的基础概念，比如 KVO、Cocoa bindings、Core Data、AppleScript-ability 等等</p>
<h2 id="访问对象属性"><a href="#访问对象属性" class="headerlink" title="访问对象属性"></a>访问对象属性</h2><h3 id="常用API"><a href="#常用API" class="headerlink" title="常用API"></a>常用API</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">nullable</span> <span class="type">id</span>)valueForKey:(<span class="built_in">NSString</span> *)key;         <span class="comment">// 通过 key 来取值</span></span><br><span class="line">- (<span class="keyword">nullable</span> <span class="type">id</span>)valueForKeyPath:(<span class="built_in">NSString</span> *)keyPath; <span class="comment">// 通过 keyPath 来取值</span></span><br><span class="line"></span><br><span class="line">- (<span class="type">void</span>)setValue:(<span class="keyword">nullable</span> <span class="type">id</span>)value forKey:(<span class="built_in">NSString</span> *)key;         <span class="comment">// 通过 key 来赋值</span></span><br><span class="line">- (<span class="type">void</span>)setValue:(<span class="keyword">nullable</span> <span class="type">id</span>)value forKeyPath:(<span class="built_in">NSString</span> *)keyPath; <span class="comment">// 通过 keyPath 来赋值</span></span><br></pre></td></tr></table></figure>

<h3 id="基础操作"><a href="#基础操作" class="headerlink" title="基础操作"></a>基础操作</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">BankAccount</span> : <span class="title">NSObject</span></span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">NSNumber</span>* currentBalance;              <span class="comment">// An attribute</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) Person* owner;                         <span class="comment">// A to-one relation</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">NSArray</span>&lt; Transaction* &gt;* transactions; <span class="comment">// A to-many relation</span></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>对于 BankAccount 的实例对象myAccount</p>
<h4 id="KeyPath"><a href="#KeyPath" class="headerlink" title="KeyPath"></a>KeyPath</h4><p>KVC还支持多级访问，KeyPath用法跟点语法相同。 例如：我们想对myAccount的<code>owner</code>属性的<code>address</code>属性的<code>street</code>属性赋值，其KeyPath为<code>owner.address.street</code></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[myAccount setValue:<span class="string">@&quot;地址&quot;</span> forKeyPath:<span class="string">@&quot;owner.address.street&quot;</span>];</span><br></pre></td></tr></table></figure>

<h4 id="多值操作"><a href="#多值操作" class="headerlink" title="多值操作"></a>多值操作</h4><p>给定一组Key，获得一组value，以字典的形式返回。该方法为数组中的每个Key调用<code>valueForKey:</code>方法。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">NSDictionary</span>&lt;<span class="built_in">NSString</span> *,<span class="type">id</span>&gt; *)dictionaryWithValuesForKeys:(<span class="built_in">NSArray</span>&lt;<span class="built_in">NSString</span> *&gt; *)keys;</span><br></pre></td></tr></table></figure>
<p>将指定字典中的值设置到消息接收者的属性中，使用字典的Key标识属性。默认实现是为每个键值对调用setValue:forKey:方法 ，会根据需要用nil替换NSNull对象</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="type">void</span>)setValuesForKeysWithDictionary:(<span class="built_in">NSDictionary</span>&lt;<span class="built_in">NSString</span> *,<span class="type">id</span>&gt; *)keyedValues;</span><br></pre></td></tr></table></figure>

<h2 id="访问集合属性"><a href="#访问集合属性" class="headerlink" title="访问集合属性"></a>访问集合属性</h2><p>可以像访问其它对象一样使用<code>valueForKey:</code>或<code>setValue:forKey:</code>方法来获取或设置集合对象（主要指NSArray和NSSet），当我们要操作集合对象的内容，比如添加或者删除元素时，通过<code>KVC的可变代理方法</code>获取集合代理对象是最有效的。</p>
<p>根据KVO的实现原理，是在运行时动态生成子类并重写setter方法来达到可以通知所有观察者对象的目的，因此我们<code>对集合对象进行操作是不会触发KVO的</code>。当我们要使用KVO监听集合对象变化时，需要通过KVC的可变代理方法获取集合代理对象，然后对代理对象进行操作。当<code>代理对象的内部对象发生改变时，会触发KVO的监听方法</code>。</p>
<p>三种不同的代理对象访问的代理方法，每种都有Key和KeyPath两种方法</p>
<ol>
<li><p><code>mutableArrayValueForKey</code>: 和 <code>mutableArrayValueForKeyPath</code>:  返回NSMutableArray对象的代理对象。</p>
</li>
<li><p><code>mutableSetValueForKey</code>: 和 <code>mutableSetValueForKeyPath</code>: 返回NSMutableSet对象的代理对象。</p>
</li>
<li><p><code>mutableOrderedSetValueForKey</code>: 和 <code>mutableOrderedSetValueForKeyPath</code>: 返回NSMutableOrderedSet对象的代理对象</p>
</li>
</ol>
<h2 id="使用集合运算符"><a href="#使用集合运算符" class="headerlink" title="使用集合运算符"></a>使用集合运算符</h2><p>KVC的valueForKeyPath:方法除了可以取出属性值以外，还可以在KeyPath中嵌套集合运算符，来对集合对象进行操作。</p>
<p>以下是KeyPath集合运算符的格式，主要分为 3 个部分。</p>
<ul>
<li>Left key path：左键路径，要操作的集合对象，如果消息接收者就是集合对象，则可以省略 Left 部分；</li>
<li>Collection operator：集合运算符；</li>
<li>Right key path：右键路径，要进行运算的集合中的属性。</li>
</ul>
<img src="/2022/03/07/%E5%85%B3%E4%BA%8EKVC%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%BB%E7%BB%93/collectionCal.png" class="&#x3D;">

<h3 id="集合运算符主要分为三类："><a href="#集合运算符主要分为三类：" class="headerlink" title="集合运算符主要分为三类："></a>集合运算符主要分为三类：</h3><p>① 聚合运算符：以某种方式合并集合中的对象，并返回右键路径中指定的属性的数据类型匹配的一个对象，一般返回NSNumber实例。<br>② 数组运算符：根据运算符的条件，将符合条件的对象以一个NSArray实例返回。<br>③ 嵌套运算符：处理集合对象中嵌套其他集合对象的情况，并根据运算符返回一个NSArray或NSSet实例。</p>
<h4 id="聚合运算符"><a href="#聚合运算符" class="headerlink" title="聚合运算符"></a>聚合运算符</h4><p>以某种方式合并集合中的对象，并返回右键路径中指定的属性的数据类型匹配的一个对象，一般返回NSNumber实例</p>
<p>@avg<br>读取集合中每个元素的右键路径指定的属性，将其转换为double类型 (nil用 0 替代)，并计算这些值的算术平均值。然后将结果以NSNumber实例返回</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 计算上表中 amount 的平均值。</span></span><br><span class="line"><span class="built_in">NSNumber</span> *transactionAverage = [<span class="keyword">self</span>.transactions valueForKeyPath:<span class="string">@&quot;@avg.amount&quot;</span>];</span><br><span class="line"><span class="comment">// transactionAverage 格式化的结果为 $ 456.54。</span></span><br></pre></td></tr></table></figure>
<p>@count</p>
<p>计算集合中的元素个数，以NSNumber实例返回。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 计算 transactions 集合中的元素个数。</span></span><br><span class="line"><span class="built_in">NSNumber</span> *numberOfTransactions = [<span class="keyword">self</span>.transactions valueForKeyPath:<span class="string">@&quot;@count&quot;</span>];</span><br><span class="line"><span class="comment">// numberOfTransactions 的值为 13。</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>@count运算符比较特别，它不需要写右键路径，即使写了也会被忽略。</p>
</blockquote>
<p>@max,@min</p>
<blockquote>
<p>@max和@min根据右键路径指定的属性在集合中搜索，搜索使用compare:方法进行比较，许多基础类 (如NSNumber类) 中都有定义。因此，右键路径指定的属性必须能响应compare:消息。搜索忽略值为nil的集合项。可以通过重写compare:方法对搜索过程进行控制。</p>
</blockquote>
<h4 id="数组运算符"><a href="#数组运算符" class="headerlink" title="数组运算符"></a>数组运算符</h4><p>根据运算符的条件，将符合条件的对象以一个NSArray实例返回。</p>
<p>@unionOfObjects</p>
<p>读取数组中每个元素的右键路径指定的属性，放在一个NSArray实例中并返回。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取集合中的所有 payee 对象。</span></span><br><span class="line"><span class="built_in">NSArray</span> *payees = [<span class="keyword">self</span>.transactions valueForKeyPath:<span class="string">@&quot;@unionOfObjects.payee&quot;</span>];</span><br><span class="line"><span class="comment">// payees 数组包含以下字符串：Green Power, Green Power, Green Power, Car Loan, Car Loan, Car Loan, General Cable, General Cable, General Cable, Mortgage, Mortgage, Mortgage, Animal Hospital。</span></span><br></pre></td></tr></table></figure>

<p>@distinctUnionOfObjects<br>读取数组中每个元素的右键路径指定的属性，放在一个NSArray实例中，将数组进行去重后返回。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取集合中的所有不同的 payee 对象。</span></span><br><span class="line"><span class="built_in">NSArray</span> *distinctPayees = [<span class="keyword">self</span>.transactions valueForKeyPath:<span class="string">@&quot;@distinctUnionOfObjects.payee&quot;</span>];</span><br><span class="line"><span class="comment">// distinctPayees 数组包含以下字符串：Car Loan, General Cable, Animal Hospital, Green Power, Mortgage。</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意： 在使用数组运算符时，如果有任何操作的对象为nil，则valueForKeyPath:方法将引发异常。</p>
</blockquote>
<h4 id="嵌套运算符"><a href="#嵌套运算符" class="headerlink" title="嵌套运算符"></a>嵌套运算符</h4><p>处理集合对象中嵌套其他集合对象的情况，并根据运算符返回一个NSArray或NSSet实例</p>
<p>@unionOfArrays,@distinctUnionOfArrays,@distinctUnionOfSets</p>
<h3 id="自定义集合运算符"><a href="#自定义集合运算符" class="headerlink" title="自定义集合运算符"></a>自定义集合运算符</h3><h4 id="使用Runtime打印NSArray类的方法列表"><a href="#使用Runtime打印NSArray类的方法列表" class="headerlink" title="使用Runtime打印NSArray类的方法列表"></a>使用Runtime打印NSArray类的方法列表</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="type">void</span>)printNSArrayMethods</span><br><span class="line">&#123;</span><br><span class="line">    u_int count;</span><br><span class="line">    Method *methods = class_copyMethodList([<span class="built_in">NSArray</span> <span class="keyword">class</span>], &amp;count);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; count ; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        Method method = methods[i];</span><br><span class="line">        SEL sel = method_getName(method);</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@&quot;%d---%@&quot;</span>, i, <span class="built_in">NSStringFromSelector</span>(sel));</span><br><span class="line">    &#125;</span><br><span class="line">    free(methods);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">0---mr_isEqualToOutputDevicesArray:</span><br><span class="line">1---mr_containsAnyOf:</span><br><span class="line">2---mr_map:</span><br><span class="line">3---sg_enumerateChunksOfSize:usingBlock:</span><br><span class="line">4---_pas_mappedArrayWithTransform:</span><br><span class="line">5---_pas_shuffledArrayUsingRng:</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<h4 id="获取NSArray中的中位数"><a href="#获取NSArray中的中位数" class="headerlink" title="获取NSArray中的中位数"></a>获取NSArray中的中位数</h4><p>为NSArray添加一个分类，并定义一个_medianForKeyPath:方法，用来获取NSArray中的中位数</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">NSArray</span> (<span class="title">HTOperator</span>)</span></span><br><span class="line">- (<span class="built_in">NSNumber</span> *)_medianForKeyPath:(<span class="built_in">NSString</span> *)keyPath;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="string">&quot;NSArray+HTOperator.h&quot;</span></span></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">NSArray</span> (<span class="title">HTOperator</span>)</span></span><br><span class="line">- (<span class="built_in">NSNumber</span> *)_medianForKeyPath:(<span class="built_in">NSString</span> *)keyPath &#123;</span><br><span class="line">    <span class="comment">//排序</span></span><br><span class="line">    <span class="built_in">NSArray</span> *sortedArray = [<span class="keyword">self</span> sortedArrayUsingSelector:<span class="keyword">@selector</span>(compare:)];</span><br><span class="line">    <span class="type">double</span> median;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>.count % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">NSInteger</span> index1 = sortedArray.count * <span class="number">0.5</span>;</span><br><span class="line">        <span class="built_in">NSInteger</span> index2 = sortedArray.count * <span class="number">0.5</span> - <span class="number">1</span>;</span><br><span class="line">        median = ([[sortedArray objectAtIndex:index1] doubleValue] + [[sortedArray objectAtIndex:index2] doubleValue]) * <span class="number">0.5</span>;        </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">NSInteger</span> index = (sortedArray.count<span class="number">-1</span>) * <span class="number">0.5</span>;</span><br><span class="line">        median = [[sortedArray objectAtIndex:index] doubleValue];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> [<span class="built_in">NSNumber</span> numberWithDouble:median];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *array = @[@<span class="number">9</span>, @<span class="number">7</span>, @<span class="number">8</span>, @<span class="number">2</span>, @<span class="number">6</span>, @<span class="number">3</span>];</span><br><span class="line"><span class="built_in">NSNumber</span> *num = [array valueForKeyPath:<span class="string">@&quot;@median.self&quot;</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;%f&quot;</span>,[num doubleValue]);</span><br><span class="line"><span class="comment">// 6.500000</span></span><br></pre></td></tr></table></figure>
<h2 id="属性验证"><a href="#属性验证" class="headerlink" title="属性验证"></a>属性验证</h2><p>可以在使用KVC赋值前验证能否为这个key赋值指定value。</p>
<p><code>validateValue</code>方法的默认实现是查看消息接收者类中是否实现了遵循命名规则为<code>validate&lt;Key&gt;:error:</code>的方法，如果有的话就返回调用该方法的结果；如果没有的话，则默认验证成功并返回YES。我们可以在消息接收者类中实现<code>validate&lt;Key&gt;:error:</code>的方法来自定义逻辑返回YES或NO</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="type">BOOL</span>)validateValue:(<span class="type">id</span>  _Nullable *)value </span><br><span class="line">               forKey:(<span class="built_in">NSString</span> *)key </span><br><span class="line">                error:(<span class="built_in">NSError</span> * _Nullable *)error;</span><br><span class="line"></span><br><span class="line">- (<span class="type">BOOL</span>)validateValue:(<span class="keyword">inout</span> <span class="type">id</span>  _Nullable *)ioValue </span><br><span class="line">           forKeyPath:(<span class="built_in">NSString</span> *)inKeyPath </span><br><span class="line">                error:(<span class="keyword">out</span> <span class="built_in">NSError</span> * _Nullable *)outError;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>默认情况下，KVC是不会自动验证属性的。</p>
</blockquote>
<h2 id="搜索规则"><a href="#搜索规则" class="headerlink" title="搜索规则"></a>搜索规则</h2><p>除了了解KVC的使用，了解KVC取值和赋值过程的工作原理也是很有必要的。</p>
<h3 id="基本的-Getter-搜索模式"><a href="#基本的-Getter-搜索模式" class="headerlink" title="基本的 Getter 搜索模式"></a>基本的 Getter 搜索模式</h3><p>以下是valueForKey:方法的默认实现，给定一个key作为输入参数，在消息接收者类中操作，执行以下过程。</p>
<p>① 按照get<Key>、<key>、is<Key>、_<key>顺序查找方法。<br>如果找到就调用取值并执行⑤，否则执行②；<br>② 查找countOf<Key>、objectIn<Key>AtIndex:、<key>AtIndexes:命名的方法。<br>如果找到第一个和后面两个中的至少一个，则创建一个能够响应所有NSArray的方法的集合代理对象（类型为NSKeyValueArray，继承自NSArray），并返回该对象。否则执行③；</p>
<p>代理对象随后将其接收到的任何NSArray消息转换为countOf<Key>、objectIn<Key>AtIndex:、<Key>AtIndexes:消息的组合，并将其发送给KVC调用方。如果原始对象还实现了一个名为get<Key>:range:的可选方法，则代理对象也会在适当时使用该方法。<br>当KVC调用方与代理对象一起工作时，允许底层属性的行为如同NSArray一样，即使它不是NSArray。</p>
<p>③ 查找countOf<Key>、enumeratorOf<Key>、memberOf<Key>:命名的方法。<br>如果三个方法都找到，则创建一个能够响应所有NSSet的方法的集合代理对象（类型为NSKeyValueSet，继承自NSSet），并返回该对象。否则执行④；</p>
<p>代理对象随后将其接收到的任何NSSet消息转换为countOf<Key>、enumeratorOf<Key>、memberOf<Key>:消息的组合，并将其发送给KVC调用方。<br>当KVC调用方与代理对象一起工作时，允许底层属性的行为如同NSSet一样，即使它不是NSSet。</p>
<p>④ 查看消息接收者类的+accessInstanceVariablesDirectly方法的返回值（默认返回YES）。如果返回YES，就按照_<key>、_is<Key>、<key>、is<Key>顺序查找成员变量。如果找到就直接取值并执行⑤，否则执行⑥。如果+accessInstanceVariablesDirectly方法返回NO也执行⑥。<br>⑤ 如果取到的值是一个对象指针，即获取的是对象，则直接将对象返回。</p>
<p>如果取到的值是一个NSNumber支持的数据类型，则将其存储在NSNumber实例并返回。<br>如果取到的值不是一个NSNumber支持的数据类型，则转换为NSValue对象, 然后返回。</p>
<p>⑥ 调用valueForUndefinedKey:方法，该方法抛出异常NSUnknownKeyException，并导致程序Crash。这是默认实现，我们可以重写该方法根据特定key做一些特殊处理。</p>
<h3 id="基本的-Setter-搜索模式"><a href="#基本的-Setter-搜索模式" class="headerlink" title="基本的 Setter 搜索模式"></a>基本的 Setter 搜索模式</h3><p>以下是setValue:forKey:方法的默认实现，给定key和value作为输入参数，尝试将KVC调用方的属性名为key的值设置为value，执行以下过程。</p>
<p>① 按照set<Key>:、<em>set<Key>:顺序查找方法。<br>如果找到就调用并将value传进去（根据需要进行数据类型转换），否则执行②。<br>② 查看消息接收者类的+accessInstanceVariablesDirectly方法的返回值（默认返回YES）。如果返回YES，就按照</em><key>、_is<Key>、<key>、is<Key>顺序查找成员变量（同 基本的 Getter 搜索模式）。如果找到就将value赋值给它（根据需要进行数据类型转换），否则执行③。如果+accessInstanceVariablesDirectly方法返回NO也执行③。<br>③ 调用setValue:forUndefinedKey:方法，该方法抛出异常NSUnknownKeyException，并导致程序Crash。这是默认实现，我们可以重写该方法根据特定key做一些特殊处理。</p>
<h3 id="NSMutableArray-搜索模式"><a href="#NSMutableArray-搜索模式" class="headerlink" title="NSMutableArray 搜索模式"></a>NSMutableArray 搜索模式</h3><p>以下是mutableArrayValueForKey:方法的默认实现，给定一个key作为输入参数，返回属性名为key的集合的代理对象（这里指NSMutableArray对象），在消息接收者类中操作，执行以下过程。</p>
<p>① 查找一对方法insertObject:in<Key>AtIndex:和removeObjectFrom<Key>AtIndex:<br>（相当于NSMutableArray的原始方法insertObject:atIndex:和removeObjectAtIndex:），<br>或者insert<Key>:atIndexes:和remove<Key>AtIndexes:<br>（相当于NSMutableArray的原始方法insertObjects:atIndexes:和removeObjectsAtIndexes:）。</p>
<p>如果我们至少实现了一个insertion方法和一个removal方法，则返回一个代理对象，来响应发送给NSMutableArray的消息，通过发送insertObject:in<Key>AtIndex:、removeObjectFrom<Key>AtIndex:、insert<Key>:atIndexes:、remove<Key>AtIndexes:组合消息给KVC调用方。否则执行②。</p>
<blockquote>
<p>该代理对象类型为NSKeyValueFastMutableArray2，继承链为NSKeyValueFastMutableArray2-&gt;NSKeyValueFastMutableArray-&gt;NSKeyValueMutableArray-&gt;NSMutableArray。</p>
</blockquote>
<p>如果我们也实现了一个可选的replace object方法，如replaceObjectIn<Key>AtIndex:withObject:或replace<Key>AtIndexes:with<Key>:，代理对象在适当的情况下也会使用它们，以获得最佳性能。</p>
<p>② 查找set<Key>:方法。<br>如果找到，就会向KVC调用方发送一个set<Key>:消息，来返回一个响应NSMutableArray消息的代理对象。否则执行③。</p>
<p>该代理对象类型为NSKeyValueSlowMutableArray，继承链为NSKeyValueSlowMutableArray-&gt;NSKeyValueMutableArray-&gt;NSMutableArray。</p>
<p>注意：<br>此步骤中描述的机制比上一步的效率低得多，因为它可能重复创建新的集合对象，而不是修改现有的集合对象。因此，在设计自己的键值编码兼容对象时，通常应该避免使用它。<br>给代理对象发送NSMutableArray消息都会调用set<Key>:方法。即，对代理对象进行修改，都是调用set<Key>:来重新赋值，所以效率会低很多。</p>
<p>③ 查看消息接收者类的+accessInstanceVariablesDirectly方法的返回值（默认返回YES）。如果返回YES，就按照_<key>、<key>顺序查找成员变量。如果找到就返回一个代理对象，该代理对象将接收所有NSMutableArray消息，通常是NSMutableArray或其子类。否则执行④。如果+accessInstanceVariablesDirectly方法返回NO也执行④。</p>
<p>④ 返回一个可变的集合代理对象。当它接收到NSMutableArray消息时，发送一个valueForUndefinedKey:消息给KVC调用方，该方法抛出异常NSUnknownKeyException，并导致程序Crash。这是默认实现，我们可以重写该方法根据特定key做一些特殊处理。</p>
<h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><p>① 根据KVC搜索规则，当没有搜索到对应的key或者keyPath相关方法或者变量时，会调用对应的异常方法<code>valueForUndefinedKey</code>:或<code>setValue:forUndefinedKey:</code>，这两个方法的默认实现是抛出异常NSUnknownKeyException，并导致程序Crash。我们可以重写这两个方法来处理异常</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">nullable</span> <span class="type">id</span>)valueForUndefinedKey:(<span class="built_in">NSString</span> *)key;</span><br><span class="line">- (<span class="type">void</span>)setValue:(<span class="keyword">nullable</span> <span class="type">id</span>)value forUndefinedKey:(<span class="built_in">NSString</span> *)key;</span><br></pre></td></tr></table></figure>
<p>② 当进行赋值如setValue:forKey:时，如果key的数据类型是非对象类型，则value就禁止传nil。否则会调用<code>setNilValueForKey:</code>方法，该方法的默认实现是抛出异常<code>NSInvalidArgumentException</code>，并导致程序Crash。我们可以重写这个方法来处理异常。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="type">void</span>)setNilValueForKey:(<span class="built_in">NSString</span> *)key</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> ([key isEqualToString:<span class="string">@&quot;hidden&quot;</span>]) &#123;</span><br><span class="line">        [<span class="keyword">self</span> setValue:@(<span class="literal">NO</span>) forKey:@”hidden”];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        [<span class="variable language_">super</span> setNilValueForKey:key];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904082415550477">iOS - 关于 KVC 的一些总结</a></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/KVC/" rel="tag"># KVC</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/03/05/iOS%E7%BB%84%E4%BB%B6%E5%8C%96%E4%B9%8BTarget-Action%E6%96%B9%E6%A1%88/" rel="prev" title="iOS组件化之Target-Action方案">
      <i class="fa fa-chevron-left"></i> iOS组件化之Target-Action方案
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/03/07/Self-Manager%E6%A8%A1%E5%BC%8F/" rel="next" title="iOS开发中的 Self-Manager 模式">
      iOS开发中的 Self-Manager 模式 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#KVC"><span class="nav-number">1.</span> <span class="nav-text">KVC</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7"><span class="nav-number">2.</span> <span class="nav-text">访问对象属性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8API"><span class="nav-number">2.1.</span> <span class="nav-text">常用API</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C"><span class="nav-number">2.2.</span> <span class="nav-text">基础操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#KeyPath"><span class="nav-number">2.2.1.</span> <span class="nav-text">KeyPath</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%9A%E5%80%BC%E6%93%8D%E4%BD%9C"><span class="nav-number">2.2.2.</span> <span class="nav-text">多值操作</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E9%9B%86%E5%90%88%E5%B1%9E%E6%80%A7"><span class="nav-number">3.</span> <span class="nav-text">访问集合属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E9%9B%86%E5%90%88%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">4.</span> <span class="nav-text">使用集合运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E5%90%88%E8%BF%90%E7%AE%97%E7%AC%A6%E4%B8%BB%E8%A6%81%E5%88%86%E4%B8%BA%E4%B8%89%E7%B1%BB%EF%BC%9A"><span class="nav-number">4.1.</span> <span class="nav-text">集合运算符主要分为三类：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%81%9A%E5%90%88%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">4.1.1.</span> <span class="nav-text">聚合运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">4.1.2.</span> <span class="nav-text">数组运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B5%8C%E5%A5%97%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">4.1.3.</span> <span class="nav-text">嵌套运算符</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%9B%86%E5%90%88%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">4.2.</span> <span class="nav-text">自定义集合运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8Runtime%E6%89%93%E5%8D%B0NSArray%E7%B1%BB%E7%9A%84%E6%96%B9%E6%B3%95%E5%88%97%E8%A1%A8"><span class="nav-number">4.2.1.</span> <span class="nav-text">使用Runtime打印NSArray类的方法列表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96NSArray%E4%B8%AD%E7%9A%84%E4%B8%AD%E4%BD%8D%E6%95%B0"><span class="nav-number">4.2.2.</span> <span class="nav-text">获取NSArray中的中位数</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B1%9E%E6%80%A7%E9%AA%8C%E8%AF%81"><span class="nav-number">5.</span> <span class="nav-text">属性验证</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%90%9C%E7%B4%A2%E8%A7%84%E5%88%99"><span class="nav-number">6.</span> <span class="nav-text">搜索规则</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%9A%84-Getter-%E6%90%9C%E7%B4%A2%E6%A8%A1%E5%BC%8F"><span class="nav-number">6.1.</span> <span class="nav-text">基本的 Getter 搜索模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%9A%84-Setter-%E6%90%9C%E7%B4%A2%E6%A8%A1%E5%BC%8F"><span class="nav-number">6.2.</span> <span class="nav-text">基本的 Setter 搜索模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NSMutableArray-%E6%90%9C%E7%B4%A2%E6%A8%A1%E5%BC%8F"><span class="nav-number">6.3.</span> <span class="nav-text">NSMutableArray 搜索模式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="nav-number">7.</span> <span class="nav-text">异常处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-number">8.</span> <span class="nav-text">参考</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Jack Chen</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">124</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">24</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2018 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jack Chen</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
